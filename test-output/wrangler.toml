# Cloudflare Worker configuration for fantasy-wedding
#
# Prerequisites:
#   1. Create KV namespace: wrangler kv namespace create TENANTS
#   2. Copy the namespace ID below
#   3. Update PAGES_HOSTNAME with your Pages project URL
#   4. Deploy: wrangler deploy
#   5. Set secret: wrangler secret put CLERK_SECRET_KEY

name = "fantasy-wedding-wildcard"
main = "worker.js"
compatibility_date = "2024-12-01"

[vars]
PAGES_HOSTNAME = "fantasy-wedding.pages.dev"
APP_DOMAIN = "fantasy.wedding"

# IMPORTANT: Create a NEW KV namespace for EACH deployment!
# Do NOT reuse KV namespaces across different domains.
# Create with: wrangler kv namespace create TENANTS
# Then copy the ID below
[[kv_namespaces]]
binding = "TENANTS"
id = "YOUR_KV_NAMESPACE_ID"

# ============================================================
# Routes are configured via Cloudflare API by deploy-sell.js
# Do NOT add routes here - they cause conflicts with existing workers
# ============================================================
